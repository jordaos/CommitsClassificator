Port f15da060ce100ff0864f33e7d2838cdc8c92c211 to v3

Also filed a Radar for #17497

See http://openradar.appspot.com/24235301
Refs #17497
[skip sauce]